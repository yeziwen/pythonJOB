//供页面调用的方法,实现各个行为的具体逻辑

(function () {

    var globalval    = require('globalval');
    var CONFIG_CONST = require('configconst');
    var nodehttps    = require('nodehttps');

    /*
    * @method onCheckUpdata 检查EC是否有更新,为EC拉起后发起的第一个https请求,若不需要更新,则发起预登录
    * @param callbackSuccess {function}  ( data {string} ) xml格式数据
    * @param callbackFaile {function} ( err {object} )    
    */
    function onCheckUpdata (callbackSuccess, callbackFaile) {
        
        //获取到选路后的url,为adesk-agent传入时,写入到全局变量,具体名字还需要商议
        //传入时　host 与　port 可能在一个字符串中，需要解析
        var selecturl  = globalval.getval('selecturl');
        var selectport = globalval.getval('selectport');
        //获取地址更新的 ,这个值是固定的,在全局常量中获取
        var MODULE_PATH = CONFIG_CONST.getval('MODULE_PATH');

        var options = 
        {
            host : selecturl,
            port : selectport,
            path : MODULE_PATH,
            method : 'GET',
            rejectUnauthorized : false
        }

        nodehttps.httpsRequset(options, null, callbackSuccess, callbackFaile);
    }

})()    